<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Activities</title>
    <link rel="stylesheet" href="css/activities.css" />
    <script>
      function submitAllChoices() {
        const formUrl = 'https://docs.google.com/forms/u/0/d/e/1FAIpQLSf8kuGT2265Ss2QCrWi7hiwrM2KIpY7zzkMZV-S4nNEnXSQyQ/formResponse';
        const formData = new FormData();

        // Get stored food choices
        const foodValues = JSON.parse(localStorage.getItem('selectedFood') || '[]');
        foodValues.forEach(value => {
          formData.append('entry.1286235537', value); // Food field name
        });

        // Get stored dessert choices
        const dessertValues = JSON.parse(localStorage.getItem('selectedDessert') || '[]');
        dessertValues.forEach(value => {
          formData.append('entry.874429333', value); // Dessert field name
        });

        // Get current activity choices
        const selectedActivities = document.querySelectorAll('input[name="activities"]:checked');
        selectedActivities.forEach(checkbox => {
          formData.append('entry.1394952858', checkbox.value); // Activities field name
        });

        // Send all data to Google Form
        fetch(formUrl, {
          method: 'POST',
          body: formData,
          mode: 'no-cors'
        }).catch(error => console.error('Error submitting form:', error));

        // Clear stored choices
        localStorage.removeItem('selectedFood');
        localStorage.removeItem('selectedDessert');

        // Navigate to last page
        window.location.href = 'lastpage.html';
      }
    </script>
  </head>
  <body>
    <div id="activityquestion"><b>Làm gìiii</b></div>
    <div class="activities-selection">
      <div class="activity-item">
        <img src="activities/bongngo.png" alt="aquarium" />
        <label
          ><input
            type="checkbox"
            name="activities"
            value="bongngo"
          />Lấy bỏng ngôôô</label
        >
      </div>
      <div class="activity-item">
        <img src="activities/sinhnhat.jpg" alt="talk" />
        <label
          ><input
            type="checkbox"
            name="activities"
            value="talk"
          />Tâm hựu</label
        >
      </div>
      <div class="activity-item">
        <img src="activities/xemphim.jpg" alt="reviewphim" />
        <label
          ><input
            type="checkbox"
            name="activities"
            value="reviewphim"
          />Xem review phimmm</label
        >
      </div>
      <div class="activity-item">
        <img src="activities/yeu.jpg" alt="yeu" />
        <label
          ><input
            type="checkbox"
            name="activities"
            value="yeu"
          />Yêu meeeeee :3</label
        >
      </div>
    </div>
    <button class="button" onclick="submitAllChoices()">
      Tiếp
    </button>
  </body>
</html>
